import sh1106
import framebuf
from machine import Pin, I2C
import utime as time

i2c = I2C(scl=Pin(14), sda=Pin(27))
oled = sh1106.SH1106_I2C(128, 64, i2c)
oled.contrast(255)
oled.fill(0)

logo = bytearray(
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x20\x00\x00\x00\x00\x00\x00\x00\x70\x00\x00\x00'
    b'\x00\x00\x00\x00\xf0\x00\x00\x00\x00\x00\x00\x01\x90\x00\x00\x00\x00\x00\x00\x03\x10\x00\x00'
    b'\x00\x00\x00\x00\x06\x10\x00\x00\x00\x00\x00\x00\x0c\x10\x00\x00\x00\x00\x00\x00\x18\x10\x00'
    b'\x00\x00\x00\x00\x00\x30\x18\x00\x00\x00\x00\x00\x00\x60\x0f\xff\xfe\x00\x00\x00\x00\xc0\x00'
    b'\x00\x03\x00\x00\x00\x01\x80\x00\x00\x01\x83\x00\x00\x03\x00\x00\x00\x01\x03\x80\x00\x06\x00'
    b'\x00\x00\x00\x03\xc0\x00\x0c\x00\x00\x00\x00\x03\xe0\x00\x08\x00\x00\x00\x00\x03\xf0\x00\x0c'
    b'\x00\x00\x00\x00\x03\xf8\x00\x0c\x00\x00\x00\x00\x03\xfc\x00\x06\x00\x00\x00\x00\x03\xfe\x00'
    b'\x03\x00\x00\x00\x00\x07\xff\x00\x01\x80\x00\x3f\xff\xff\xff\x80\x00\xc0\x00\x3f\xff\xff\xff'
    b'\xc0\x00\x60\x00\x3f\xff\xff\xff\xe0\x00\x30\x10\x3f\xff\xff\xff\xf0\x00\x18\x10\x3f\xff\xff'
    b'\xff\xf0\x00\x0c\x10\x3f\xff\xff\xff\xf8\x00\x06\x10\x3f\xff\xff\xff\xf8\x00\x03\x10\x3f\xff'
    b'\xff\xff\xf0\x00\x01\x90\x3f\xff\xff\xff\xe0\x00\x00\xf0\x3f\xff\xff\xff\xc0\x00\x00\x70\x3f'
    b'\xff\xff\xff\x80\x00\x00\x00\x1f\xff\xff\xff\x00\x00\x00\x00\x00\x00\x07\xfe\x00\x00\x00\x00'
    b'\x00\x00\x03\xfc\x00\x00\x00\x00\x00\x00\x03\xf8\x00\x00\x00\x00\x00\x00\x03\xf0\x00\x00\x00'
    b'\x00\x00\x00\x03\xe0\x00\x00\x00\x00\x00\x00\x03\xc0\x00\x00\x00\x00\x00\x00\x03\x80\x00\x00'
    b'\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
)

portrait_face = bytearray(  # 48x64
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xe0\x00\x00\x00\x00\x1f\xfc\x00'
    b'\x00\x00\x00\x7f\xff\x00\x00\x00\x00\xff\xff\x00\x00\x00\x01\xff\xff\xc0\x00\x00\x07\xff\xff'
    b'\xc0\x00\x00\x0f\xff\xff\xe0\x00\x00\x0f\xff\xff\xe0\x00\x00\x1f\xff\xff\xf0\x00\x00\x1f\xff'
    b'\xff\xf0\x00\x00\x3f\xc0\x00\xf8\x00\x00\x7f\x00\x00\x38\x00\x00\x7e\x00\x00\x3c\x00\x00\xfc'
    b'\x00\x00\x1e\x00\x00\xf8\x00\x00\x1e\x00\x00\xf8\x00\x00\x0e\x00\x00\xf0\x00\x00\x0e\x00\x00'
    b'\xf0\x00\x00\x06\x00\x00\xe0\x00\x00\x06\x00\x00\xe0\x00\x00\x06\x00\x00\x60\x00\x00\x06\x00'
    b'\x00\x40\x00\x00\x06\x00\x00\x40\x80\x00\x86\x00\x00\x6f\xf0\x1f\xf4\x00\x00\x70\x1f\xf0\x0e'
    b'\x00\x00\xe0\x07\xe0\x0e\x00\x00\x60\x04\x40\x04\x00\x00\x40\x06\x40\x04\x00\x00\x60\x04\x40'
    b'\x0c\x00\x00\x60\x04\x40\x0c\x00\x00\x30\x08\x20\x08\x00\x00\x30\x18\x10\x18\x00\x00\x4c\xb0'
    b'\x0c\x64\x00\x00\x23\x40\x07\x88\x00\x00\x20\x00\x00\x0c\x00\x00\x20\x00\x00\x08\x00\x00\x30'
    b'\x00\x00\x08\x00\x00\x30\x0e\xf0\x18\x00\x00\x30\x3f\xfc\x18\x00\x00\x18\x7f\xfe\x18\x00\x00'
    b'\x18\xe0\x06\x38\x00\x00\x19\x80\x03\x30\x00\x00\x1c\x80\x03\x70\x00\x00\x0f\x83\x83\x70\x00'
    b'\x00\x0f\x87\xc3\xe0\x00\x00\x0f\x83\xc3\xe0\x00\x00\x07\xc7\xc7\xe0\x00\x00\x07\xff\xff\xc0'
    b'\x00\x00\x07\xff\xff\xc0\x00\x00\x03\xff\xff\xc0\x00\x00\x07\xff\xff\x80\x00\x00\x03\xff\xff'
    b'\xc0\x00\x00\x03\xff\xff\xc0\x00\x00\x03\xff\xff\x80\x00\x00\x03\xff\xff\x80\x00\x00\x01\xff'
    b'\xff\x00\x00\x00\x00\xff\xfe\x00\x00\x00\x00\x7f\xfc\x00\x00\x00\x00\x0f\xf0\x00\x00\x00\x00'
    b'\x02\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
)

lugi_face = bytearray(
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08'
    b'\x3f\x80\x00\x00\x00\x00\x04\xff\xff\xe0\x00\x00\x00\x01\xfb\xde\x7f\xf0\x00\x00\x00\x1f\xc3'
    b'\x04\x0f\xfc\x00\x00\x00\xfe\x04\x02\x03\xff\x00\x00\x17\xf0\x04\x02\x00\xff\x80\x01\xff\xe0'
    b'\x08\x02\x00\x7f\x80\x03\xff\xe8\x08\x02\x00\x3f\xc0\x07\xff\xfc\x04\x03\x00\x1f\xe0\x0f\xff'
    b'\x06\x08\x02\x00\x1f\xf0\x0f\xfe\x07\x04\x02\x00\x0f\xf0\x0f\xfe\x03\x06\x06\x00\x0f\xf8\x1f'
    b'\xfe\x03\x83\x04\x00\x0f\xf8\x1f\xff\x43\x80\xfc\x00\x0f\xfc\x3f\xff\xe3\x80\x2c\x00\x0f\xfc'
    b'\x1f\xff\xe3\x00\x0c\x00\x0f\xfc\x3f\xff\xe3\x80\x0c\x00\x0f\xfc\x1f\xff\xc3\x80\xfc\x00\x0f'
    b'\xfc\x1f\xfe\x03\x81\x0c\x00\x0f\xfc\x1f\xfe\x03\x82\x06\x00\x0f\xf8\x0f\xfe\x03\x04\x02\x00'
    b'\x0f\xf8\x0f\xff\x07\x0c\x02\x00\x0f\xf8\x07\xff\xfe\x08\x02\x00\x0f\xf0\x03\xff\xf8\x08\x02'
    b'\x00\x0f\xf0\x01\xff\xc0\x08\x03\x00\x1f\xc0\x00\x6f\xf0\x04\x02\x00\x1f\xc0\x00\x01\xfc\x04'
    b'\x02\x00\x7f\x00\x00\x00\x3f\x82\x02\x01\xfc\x00\x00\x00\x07\xfb\xcc\x07\xf0\x00\x00\x00\x00'
    b'\x14\xff\xff\xc0\x00\x00\x00\x00\x00\x0d\xff\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
    b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
)


def run():
    while True:

        oled.fill(0)
        face = framebuf.FrameBuffer(portrait_face, 48, 64, framebuf.MONO_HLSB)
        oled.blit(face, 40, 0)
        oled.show()

        time.sleep(2)

        oled.fill(0)
        oled.text('blog.lugowski.eu', 0, 56)
        oled.show()

        for x in range(28):
            oled.write_cmd(0x40 | x)
            time.sleep_ms(10)

        time.sleep(2)

        oled.fill(0)
        oled.show()
        oled.write_cmd(0x40 | 0)

        face = framebuf.FrameBuffer(logo, 64, 48, framebuf.MONO_HLSB)
        oled.blit(face, 32, 8)
        oled.show()

        time.sleep(2)
